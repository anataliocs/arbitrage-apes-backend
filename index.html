<!DOCTYPE html>
<html>
<head>
  <title>SSE DEMO</title>
  
  <script type="text/javascript">
    const eventSource = new EventSource('http://localhost:3000/api/stellar/mock/event/sse', {
      withCredentials: true
    });
    
    eventSource.onmessage = ({ data }) => {
      console.log("Received SSE data:" + JSON.stringify(data));
      const message = document.createElement('div');
      message.innerText = 'New message: ' + JSON.stringify(data);
      document.body.appendChild(message);
    }
    eventSource.onerror = (err) => {
      console.log("Error: " + JSON.stringify(err));
      const errorElement = document.createElement('li');
      errorElement.innerText = 'New Error: ' + err;
      document.getElementById("errors").appendChild(errorElement);
    }
    eventSource.onopen = () => {
      console.log("SSE connection opened");
    }
    eventSource.onclose = () => {
      console.log("SSE connection closed");
    }
  </script>
  

</head>
  
<body>
<h1>Server Sent Events Demo</h1>

<h2>Messages</h2>
<ol id="messages">
  <li>placeholder 1 messages</li>

</ol>

<h2>Errors</h2>
<ol id="errors">
  <li>placeholder 1 errors</li>
  
</ol>

</body>
</html>